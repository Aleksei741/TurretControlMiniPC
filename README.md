# TurretControlMiniPC

# Протокол обмена

## Передаваемые данные рабочего режима

|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|1-вкл/0-выкл|hit_sensor|0|0|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Статус передачи видео|Количество срабатываний датчика вибрации|Резерв|Резерв|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

## Принимаемые данные рабочего режима

|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'C' (0x43)|motor1 (low)|motor1 (high)|motor2 (low)|motor2 (high)|trigger|0|0|0xA5|0xA5|
|Описание|Turret|Control|Команда управления турелью|кол-во шагов перемещения 1 двигателя low byte|кол-во шагов перемещения 1 двигателя high byte|кол-во шагов перемещения 2 двигателя low byte|кол-во шагов перемещения 2 двигателя high byte|Команда на срабатывание курка|Резерв|Резерв|Константа|Константа|

### Принимаемые значения
|Параметр|Значения|
|-|-|
|motor1|0-0xFFFE 0xFFFF - непрерывное перемещение|
|motor2|0-0xFFFE 0xFFFF - непрерывное перемещение|
|trigger|0 - выкл / 1 - вкл|
|hit_sensor|0 - 0xFF|

## Команды работы с датчиком вибрации

### Установка задержки срабатывания
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'S' (0x53)|P (0x50)|D (0x44)|Delay (low)|Delay (low)|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Sensor|Parameters|Delay|Задержка повторного срабатывания сенсора, мс|Задержка повторного срабатывания сенсора, мс|Резерв|Резерв|Резерв|Константа|Константа|

|Параметр|Значения|
|-|-|
|Delay|0-0xFFFF|

## Команды работы с видео

### Включение/Выключение передачи видео
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'V' (0x56)|'S' (0x53)|1-вкл/0-выкл|0|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Video|Start/Stop|команда|Резерв|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

### Задание высоты изображения Height
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'V' (0x56)|'H' (0x48)|Height (low)|Height (high)|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Video|Height|Высота передаваемого изображения|Высота передаваемого изображения|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

### Задание ширины изображения Width
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'V' (0x56)|'W' (0x57)|Width (low)|Width (high)|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Video|Width|Ширина передаваемого изображения|Ширина передаваемого изображения|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

### Задание битрейта
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'V' (0x56)|'B' (0x42)|Bitrate (byte 1)|Bitrate (byte 2)|Bitrate (byte 3)|Bitrate (byte 4)|0|0|0xA5|0xA5|
|Описание|Turret|Control|Video|Bitrate|Битрейт|Битрейт|Битрейт|Битрейт|Резерв|Резерв|Константа|Константа|

### Задание кадров в секунду
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'V' (0x56)|'F' (0x46)|Framerate (low)|Framerate (high)|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Video|Framerate|Кадров в секунду|Кадров в секунду|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

### Задание порта на прием видео данных
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'V' (0x56)|'P' (0x50)|Port (low)|Port (high)|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Video|Port|Номер порта|Номер порта|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

### Принимаемые значения
|Параметр|Значения|
|-|-|
|Height|0-0xFFFF|
|Width|0-0xFFFF|
|Bitrate|0-0xFFFFFFFF|
|Framerate|0-0xFFFF|
|Port|0-0xFFFF|

## Установка параметров движения

### Максимальное количество шагов из нулевого положения 
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'M' (0x56)|'P' (0x50)|0x01|MaxSteppersStepMotor1 (Byte 1)|MaxSteppersStepMotor1 (Byte 2)|MaxSteppersStepMotor1 (Byte 3)|MaxSteppersStepMotor1 (Byte 4)|0|0xA5|0xA5|
|Описание|Turret|Control|Movement|Parameters|Max steppers step motor1|Максимальное количество шагов шагового двигателя 1|...|...|...|Резерв|Константа|Константа|

|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'M' (0x56)|'P' (0x50)|0x02|MaxSteppersStepMotor2 (Byte 1)|MaxSteppersStepMotor2 (Byte 2)|MaxSteppersStepMotor2 (Byte 3)|MaxSteppersStepMotor2 (Byte 4)|0|0xA5|0xA5|
|Описание|Turret|Control|Movement|Parameters|Max steppers step motor2|Максимальное количество шагов шагового двигателя 2|...|...|...|Резерв|Константа|Константа|

### Включение движения без ограничений
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'M' (0x56)|'F' (0x46)|'L' (0x4C)|FlagNoLimitStepMotor|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Movement|Flag|NoLimitStepMotor|Флаг включения движения без ограничений|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

### Задать нулевое положение
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'M' (0x56)|'F' (0x46)|'Z' (0x5A)|FlagZeroPosition|0|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Movement|Flag|ZeroPosition|Установить нулевое положение|Резерв|Резерв|Резерв|Резерв|Константа|Константа|

### Частота генерации сигнала на вращение
|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'M' (0x56)|'P' (0x50)|0x11|FreqMotor1 (low)|FreqMotor1 (high)|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Movement|Parameters|FreqMotor 1|Частота управления шаговым двигателем 1, Гц|...|Резерв|Резерв|Резерв|Константа|Константа|

|Байт|1|2|3|4|5|6|7|8|9|10|11|12|
|----|-|-|-|-|-|-|-|-|-|--|--|--|
|Значение|'T' (0x54)|'C' (0x43)|'M' (0x56)|'P' (0x50)|0x12|FreqMotor2 (low)|FreqMotor2 (high)|0|0|0|0xA5|0xA5|
|Описание|Turret|Control|Movement|Parameters|FreqMotor 2|Частота управления шаговым двигателем 2, Гц|...|Резерв|Резерв|Резерв|Константа|Константа|

### Принимаемые значения
|Параметр|Значения|
|-|-|
|MaxSteppersStepMotor1|0-0xFFFFFFFF|
|MaxSteppersStepMotor2|0-0xFFFFFFFF|
|FlagNoLimitStepMotor|1-выкл ограничения/0-Нормальный режим работы|
|FlagZeroPosition|1-Турель в нулевой позиции (Сброс счетчиков положения)/0-Нормальный режим работы|
|FreqMotor1|0-1000|
|FreqMotor2|0-1000|